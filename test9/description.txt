compare to test8, we only do the map_lookup once